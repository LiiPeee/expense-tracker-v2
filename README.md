# expense-tracker-v2

# SCRIPT TO CREATE TABLE

CREATE TABLE Organization(
Id BIGINT PRIMARY KEY IDENTITY(1,1),
Name VARCHAR(50) NOT NULL,
CreatedAt DATETIME NOT NULL DEFAULT GETDATE(),
UpdatedAt DATETIME NULL DEFAULT GETDATE()
)

CREATE TABLE Account(
Id BIGINT PRIMARY KEY IDENTITY(1,1),
CreatedAt DATETIME NOT NULL DEFAULT GETDATE(),
UpdatedAt DATETIME NULL,
FirstName VARCHAR(100) NOT NULL,
LastName VARCHAR(100) NULL,
Email VARCHAR(50) NOT NULL,
Password VARCHAR(30) NOT NULL,
Balance Decimal(18,2) NOT NULL,
IsActive BIT NOT NULL,
OrganizationId BIGINT,
CONSTRAINT FK_ORGANIZATION_ACCOUNT_ID FOREIGN KEY (OrganizationId) REFERENCES Organization(id)
)

CREATE TABLE Address(
Id BIGINT PRIMARY KEY IDENTITY(1,1),
CreatedAt DATETIME NOT NULL DEFAULT GETDATE(),
UpdatedAt DATETIME NULL,
Street VARCHAR(100) NOT NULL,
City VARCHAR(100) NULL,
State VARCHAR(100) NULL,
ZipCode VARCHAR(100) NULL,
Country VARCHAR(100) NULL,
IsPrimary BIT NOT NULL
)

CREATE TABLE Category(
Id BIGINT PRIMARY KEY IDENTITY(1,1),
CreatedAt DATETIME NOT NULL DEFAULT GETDATE(),
UpdatedAt DATETIME NULL,
Name VARCHAR(100) NOT NULL,
Description VARCHAR(255) NULL,
IsActive BIT NOT NULL,
)

CREATE TABLE TypeContact(
Id BIGINT PRIMARY KEY IDENTITY(1,1),
CreatedAt DATETIME NOT NULL DEFAULT GETDATE(),
UpdatedAt DATETIME NULL,
Name VARCHAR(100) NOT NULL,
)

CREATE TABLE Contact(
Id BIGINT PRIMARY KEY IDENTITY(1,1),
CreatedAt DATETIME NOT NULL DEFAULT GETDATE(),
UpdatedAt DATETIME NULL,
Name VARCHAR(100) NOT NULL,
Email VARCHAR(100) NULL,
Phone VARCHAR(100) NULL,
Document VARCHAR(100) NULL,
IsActive BIT NOT NULL,
TypeContactId BIGINT,
AccountId BIGINT,
CONSTRAINT FK_TYPECONTAINT_CONTACT_ID FOREIGN KEY (TypeContactId) REFERENCES TypeContact(Id),
CONSTRAINT FK_CONTACT_ACCOUNT_ID FOREIGN KEY (AccountId) REFERENCES Account(Id)
)

CREATE TABLE TypeTransaction(
Id BIGINT PRIMARY KEY IDENTITY(1,1),
CreatedAt DATETIME NOT NULL DEFAULT GETDATE(),
UpdatedAt DATETIME NULL,
Name VARCHAR(100) NOT NULL
)

CREATE TABLE Recurrence(
Id BIGINT PRIMARY KEY IDENTITY(1,1),
CreatedAt DATETIME NOT NULL DEFAULT GETDATE(),
UpdatedAt DATETIME NULL,
Name VARCHAR(50) NOT NULL
)

CREATE TABLE Transactions(
Id BIGINT PRIMARY KEY IDENTITY(1,1),
CreatedAt DATETIME NOT NULL DEFAULT GETDATE(),
UpdatedAt DATETIME NULL,
Amount Decimal(18,2) NOT NULL,
Name VARCHAR(100) NOT NULL,
Description VARCHAR(100) NULL,
Paid BIT NOT NULL,
NumberOfInstallment BIGINT NULL,
DateOfInstallment DATETIME NULL,
RecurrenceId BIGINT,
ContactId BIGINT,
AccountId BIGINT,
CategoryId BIGINT,
TypeTransactionId BIGINT,
QuantityInstallment VARCHAR(50),
CONSTRAINT FK_ACCOUNT_TRANSACTIOND_ID FOREIGN KEY (AccountId) REFERENCES Account(Id),
CONSTRAINT FK_RECURRENCE_TRANSACTION_ID FOREIGN KEY (RecurrenceId) REFERENCES Recurrence(Id),
CONSTRAINT FK_CONTACT_TRANSACTION_ID FOREIGN KEY (ContactId) REFERENCES Contact(Id),
CONSTRAINT FK_CATEGORY_TRANSACTION_ID FOREIGN KEY (CategoryId) REFERENCES Category(Id),
CONSTRAINT FK_TYPETRANSACTION_TRANSACTION_ID FOREIGN KEY (TypeTransactionId) REFERENCES TypeTransaction(Id)
)

CREATE TABLE SubCategory(
Id BIGINT PRIMARY KEY IDENTITY(1,1),
CreatedAt DATETIME NOT NULL DEFAULT GETDATE(),
UpdatedAt DATETIME NULL,
Name VARCHAR(100) NOT NULL,
CategoryId BIGINT,
CONSTRAINT FK_SUBCATEGORY_CATEGORY_ID FOREIGN KEY (CategoryId) REFERENCES Category(Id)
)

INSERT INTO TypeContact (Name) VALUES('PERSONAL'),('BUSINESS')
INSERT INTO TypeTransaction (Name) VALUES('EXPENSE'),('INCOME')
INSERT INTO Recurrence (Name) VALUES ('NONE'), ('DAILY'), ('BiWeekly'), ('Monthly')

# DOCKER COMPOSE

services:
sqlserver:
image: mcr.microsoft.com/mssql/server:2022-latest
container_name: sqlserver
environment:
ACCEPT_EULA: "Y"
SA_PASSWORD: "${DB_PASS}"
MSSQL_PID: "Developer"
ports: - "1433:1433"
volumes: - sql_data:/var/opt/mssql
restart: unless-stopped

volumes:
sql_data:
